// GENERATED BY UNITY. REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN
buildscript {
    repositories {
        mavenCentral()
        jcenter {
            url "http://jcenter.bintray.com/"
        }
        google()
        maven { url "https://maven.google.com" }


    }

    dependencies {
        classpath 'com.android.tools.build:gradle:3.0.1'
    }
}

allprojects {
    repositories {
        mavenCentral()
        flatDir {
            dirs 'libs'
        }
        google()
        jcenter()
        maven { url "https://maven.google.com" }
		maven { url "http://mvnrepository.com"}
		
    }
}

apply plugin: 'com.android.application'

android {
    compileSdkVersion 28
    buildToolsVersion '28.0.3'

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    applicationVariants.all { variant ->
        variant.outputs.each { output ->
            def outputFile = output.outputFile
            def fileName = outputFile.getName()
            if (outputFile != null && outputFile.name != null && outputFile.name.endsWith(".apk")) {
                if (variant.buildType.name == 'release') {
                    def versionName = variant.mergedFlavor.versionName
                    def flavor = variant.getFlavorName()
                    fileName = "huakai_release_${flavor}_v${versionName}.apk"
                }
                output.outputFileName = fileName
            }
        }
    }


    defaultConfig {
        multiDexEnabled true
        versionCode 1
        versionName "0.1"
        flavorDimensions "channel"
        buildConfigField "String", "BuildChannel", "\"\""
        minSdkVersion 21
        targetSdkVersion 28
        applicationId 'com.sky.gift'
        ndk {
            abiFilters 'armeabi-v7a'
        }
        manifestPlaceholders = [
                JPUSH_PKGNAME : applicationId,
                JPUSH_APPKEY : "546b33aad1e8f4457c0a8722", //JPush 上注册的包名对应的 Appkey.
                JPUSH_CHANNEL : "developer-default", //暂时填写默认值即可.
        ]
    }

    dexOptions {
        javaMaxHeapSize "8g"
    }

    packagingOptions {
        exclude 'META-INF/androidx.localbroadcastmanager_localbroadcastmanager.version'
    }

    lintOptions {
        abortOnError false
    }

    aaptOptions {
        noCompress '.unity3d', '.ress', '.resource', '.obb', '.bundle'
    }

    subprojects {
        project.plugins.whenPluginAdded { plugin ->
            if ("com.android.build.gradle.AppPlugin" == plugin.class.name) {
                project.android.dexOptions.preDexLibraries = false
            } else if ("com.android.build.gradle.LibraryPlugin" == plugin.class.name) {
                project.android.dexOptions.preDexLibraries = false
            }
        }
    }

    signingConfigs {
        release {
            storeFile file('mergepig.keystore')
            storePassword 'mergepig'
            keyAlias 'mergepig'
            keyPassword 'mergepig'
        }
    }

    buildTypes {
        debug {
            jniDebuggable true
        }
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-unity.txt'
            signingConfig signingConfigs.release
        }
    }

    packagingOptions {
        doNotStrip '*/armeabi-v7a/*.so'
    }


    productFlavors {

//        guanwangsdk {
//            dimension "channel"
//            versionCode 12
//            versionName "1.2"
//            applicationId "happy.merge.pigpig"
//            manifestPlaceholders = [af_channelid: "bytedance", "bugly_channelid": "bytedance",APPLOG_SCHEME: "rangersapplog.mergepig__".toLowerCase()]
//            resValue "string", "wx_app_id", "wx21d2fac77b129031"
//        }


    }
}

dependencies {

    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation 'com.android.support:multidex:1.0.3'

//    implementation 'cn.jiguang.sdk:jpush:3.7.0'  // 此处以JPush 3.7.0 版本为例。
//    implementation 'cn.jiguang.sdk:jcore:2.4.2'  // 此处以JCore 2.4.2 版本为例

    compile 'cn.jiguang.sdk:jpush:3.7.0'  // 此处以JPush 3.7.0 版本为例。
    compile 'cn.jiguang.sdk:jcore:2.4.2'  // 此处以JCore 2.4.2 版本为例。

}
